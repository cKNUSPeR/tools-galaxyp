<macros>
    <token name="@TOOL_VERSION@">0.2.0</token>
	<token name="@GALAXY_VERSION@">0</token>

    <xml name="m2aia_preprocessing">
        <conditional name="m2aia">
            <param name="use_m2aia_preproc" label="Use the m2aia signal preprocessing?" type="boolean" truevalue="TRUE" falsevalue="FALSE"/>

            <when value="TRUE">

            <param name="bsl" label="m2aia Baseline Correction" type="select" help="Select a strategy for Baseline correction.">
                <option value="None" selected="true">No Correction</option>
                <option value="Median" >Median Baseline Correction</option>
                <option value="TopHat" >Top Hat Baseline Correction</option>
            </param>
            
            <param name="bsl_hws" label="Choose the half-windowsize for Baseline correction:" type="integer"
                               value="50"
                               help="Choose the half window size in which baseline correction should be applied"/>
            

            <param name="smo" label="m2aia Spectral Smoothing" type="select" help="Select a strategy for Spectral Smoothing.">
                <option value="None" selected="true">No Smoothing</option>
                <option value="Gaussian" >Gaussian Smoothing</option>
                <option value="SavitzkyGolay" >Savitzky Golay Smoothing</option>
            </param>

            <param name="smo_hws" label="Choose the half window size for Smoothing:" type="integer"
                               value="50"
                               help="Choose the half window size in which baseline correction should be applied"/>

            <param name="nor" label="m2aia Normalization" type="select" help="Select a strategy for Intensity Normalization.">
                    <option value="None" selected="true">No Normalization</option>
                    <option value="TIC" >TIC Normalization</option>
                    <option value="RMS" >RMS Normalization</option>
                    <option value="Sum" >Sum Normalization</option>
                    <option value="Mean" >Mean Normalization</option>
                    <option value="Max" >Max Normalization</option>
                </param>

            <param name="itr" label="m2aia Intensity transformation" type="select" help="Select a strategy for Intensity Transformation.">
                <option value="None" selected="true">No Transformation</option>
                <option value="Log2" >log2 Transformation</option>
                <option value="Log10" >log10 Transformation</option>
                <option value="SquareRoot" >Square Root Transformation</option>
            </param>
            </when>

    </conditional>
    </xml>

    <token name="@m2aia_parameters@">'--nor' '${m2aia.nor}' '--itr' '${m2aia.itr}' '--bsl_hws' '${m2aia.bsl_hws}' '--bsl' '${m2aia.bsl}' '--smo_hws' '${m2aia.smo_hws}' '--smo' '${m2aia.smo}'</token>
</macros>
